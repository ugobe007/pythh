# ğŸ¯ PYTHH Signal Radar â€” Complete Production Picture

## Current State (Jan 26, 2026)

You now have a **production-hardened, hero-positioned signal radar** with a **subordinate context layer** that explains market dynamics without competing for narrative authority.

---

## Architecture: 3-Layer Foundation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 1: HERO PRODUCT (Canonical Entry)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  PYTHH SIGNAL RADAR (/signals-radar)                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  "Where is capital moving toward you right now?"           â”‚
â”‚                                                             â”‚
â”‚  Mode Machine:                                              â”‚
â”‚  global â†’ injecting â†’ reveal â†’ tracking                    â”‚
â”‚                                                             â”‚
â”‚  Live Observatory:                                          â”‚
â”‚  â€¢ 18 channels with deltas + decay                         â”‚
â”‚  â€¢ SVG radar sweep with YOU blip + halo pulse              â”‚
â”‚  â€¢ Alignment arcs, phase change rings                      â”‚
â”‚  â€¢ Right rail: identity, window, alignment, power, moves   â”‚
â”‚  â€¢ Live "what moved your odds" feed                        â”‚
â”‚                                                             â”‚
â”‚  Time-Choreographed Dopamine Sequence:                      â”‚
â”‚  T=420ms: "We found you"                                   â”‚
â”‚  T=620ms: Halo pulse                                       â”‚
â”‚  T=1200ms: Reveal panels                                   â”‚
â”‚  T=2200ms: Enter tracking                                  â”‚
â”‚  T=4â€“8s: Email capture                                     â”‚
â”‚                                                             â”‚
â”‚  Causal Semantics:                                          â”‚
â”‚  Senior hire â†’ Talent +6, Velocity +3                      â”‚
â”‚  Enterprise customer â†’ Opportunity +9                      â”‚
â”‚  Investor attention â†’ Alignment +3                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 2: CONTEXT LAYER (Explanation)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  SIGNALS CONTEXT (/app/signals-context)                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  "Here's what changed in the market that moved your odds"  â”‚
â”‚                                                             â”‚
â”‚  Only Reachable From:                                       â”‚
â”‚  â€¢ Radar tracking mode (button: "Why did my odds move?")   â”‚
â”‚  â€¢ Right rail email capture row                            â”‚
â”‚                                                             â”‚
â”‚  Displays:                                                  â”‚
â”‚  â€¢ Causal belief shift cards (personalized impact)         â”‚
â”‚  â€¢ Sector momentum with YOUR alignment delta               â”‚
â”‚  â€¢ Investor receptivity (derived from alignment)           â”‚
â”‚  â€¢ Back button: "â† Back to my signal"                      â”‚
â”‚                                                             â”‚
â”‚  Data Source:                                               â”‚
â”‚  Same /api/v1/startups/{id}/tracking endpoint as Radar     â”‚
â”‚  (Zero new backend required)                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 3: INTERNAL TOOLS (Observability)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  /app/engine      â†’ Signal engine internals                â”‚
â”‚  /app/logs        â†’ System debug + audit                   â”‚
â”‚  /admin/health    â†’ System Guardian health checks          â”‚
â”‚                                                             â”‚
â”‚  (Not user-facing, internal development)                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Production Readiness Checklist

### âœ… Frontend (Complete)
- [x] 4-state mode machine with invariant guards
- [x] 18 live channels with delta merge semantics
- [x] SVG radar with real-time sweep + halo pulse
- [x] Right rail: panels (identity, window, alignment, power, moves)
- [x] Live feed: prepend-only, 10 most recent events
- [x] Time-choreographed reveal sequence (420ms â†’ 2200ms)
- [x] Production ApiDataSource (safe parsing, timeouts, error recovery)
- [x] Runtime config with auto-detection (fake/api mode)
- [x] 3 graceful error states (never blank screens)
- [x] Signals Context layer (market explanation)
- [x] Build verified âœ“ (10.82s, 2508 modules)

### â³ Backend (Awaiting Implementation)
- [ ] `POST /api/v1/startups/resolve` â€” resolve URL â†’ startup
- [ ] `POST /api/v1/scans` â€” create scan job
- [ ] `GET /api/v1/scans/{id}` â€” poll scan status (building â†’ ready)
- [ ] `GET /api/v1/startups/{id}/tracking?cursor=...` â€” poll deltas
- [ ] `POST /api/v1/alerts/subscribe` â€” email subscription
- [ ] `GET /api/v1/health` â€” health check (required for auto-detection)

### âœ… Testing
- [x] 6 core unit tests (mode transitions, merge logic, backoff)
- [x] Mode machine invariants verified
- [x] Merge delta semantics locked
- [x] Exponential backoff math tested
- [x] TypeScript strict mode passing
- [ ] Integration tests (end-to-end with real backend)
- [ ] Performance tests (P95 < 200ms per endpoint)
- [ ] Cursor monotonicity verified (50+ polls without regression)

### âœ… Observability
- [x] Centralized logging: [PYTHH:operation] prefix + timing
- [x] Error shapes normalized: { ok: false, reason, status? }
- [x] System Guardian monitoring
- [x] Health dashboard (/admin/health)
- [ ] Production metrics dashboard (Datadog/New Relic)
- [ ] Error budget tracking
- [ ] Cursor validation monitoring

---

## Key Technical Decisions (Locked)

| Decision | Rationale | Status |
|----------|-----------|--------|
| **4-state machine** | Prevents invalid UI states | âœ… Locked |
| **18 channels (not pages)** | Real-time, atomic, never async | âœ… Locked |
| **SVG radar field** | Cinematic, experiential | âœ… Locked |
| **Cursor-based polling** | Incremental deltas, low bandwidth | âœ… Locked |
| **Prepend-only feed** | Newest first, causally coherent | âœ… Locked |
| **Exponential backoff** | Graceful degradation under load | âœ… Locked |
| **Per-request AbortController** | Safe timeout management | âœ… Locked |
| **Runtime auto-detection** | Zero rebuild for fakeâ†’api switch | âœ… Locked |
| **Context layer subordinate** | Radar is unambiguous hero | âœ… Locked |

---

## API Contract (LOCKED)

### POST /api/v1/startups/resolve
```json
// Request
{ "url": "example.com" }

// Response (Success)
{
  "ok": true,
  "startup": {
    "id": "uuid",
    "name": "Example",
    "category": "AI",
    "stage": "Seed"
  }
}

// Response (Error)
{ "ok": false, "reason": "startup_not_found" }
```

### POST /api/v1/scans
```json
// Request
{ "startup_id": "uuid" }

// Response
{
  "ok": true,
  "scan": {
    "scan_id": "uuid",
    "status": "building",
    "cursor": "cursor_001"
  }
}
```

### GET /api/v1/scans/{scan_id}
```json
// Response (Building)
{
  "status": "building",
  "progress": 0.45
}

// Response (Ready)
{
  "status": "ready",
  "channels": { ... },
  "panels": { ... },
  "radar": { ... },
  "cursor": "cursor_005"
}
```

### GET /api/v1/startups/{id}/tracking?cursor=cursor_005
```json
{
  "ok": true,
  "channels": {
    "delta": [
      { "name": "Talent", "delta": 3 },
      { "name": "Velocity", "delta": 2 }
    ]
  },
  "feed": [
    { "text": "Senior hire...", "confidence": 0.9 }
  ],
  "radar": { ... },
  "cursor": "cursor_006"
}
```

### GET /api/v1/health
```json
{ "status": "ok", "timestamp": "2026-01-26T..." }
```

---

## Environment Configuration

### Dev (Fake Data)
```bash
VITE_PYTHH_DATASOURCE=fake
npm run dev
# App runs with fake engine, never calls API
```

### Dev (Real API)
```bash
VITE_PYTHH_DATASOURCE=api
VITE_PYTHH_API_BASE=http://localhost:3000
npm run dev
# App tries health check, switches to real API
```

### Production (Auto-Detect)
```bash
npm run build
npm run preview
# No env vars set
# Auto-detection: tries /api/v1/health at origin
# Falls back to fake if unhealthy
```

---

## Deployment Sequence

### Step 1: Backend Ready
1. Implement 6 API endpoints (match BACKEND_CONTRACT.md)
2. Verify cursor monotonicity (50+ polls)
3. Verify latency P95 < 200ms per endpoint
4. Test health check endpoint

### Step 2: Environment Config
```bash
# Set in production environment
export VITE_PYTHH_DATASOURCE=api
export VITE_PYTHH_API_BASE=https://api.yourdomain.com

npm run build
```

### Step 3: Deploy Frontend
```bash
npm run build
npm run preview  # Test locally
# Push to CDN/hosting
```

### Step 4: Gradual Rollout
- Deploy to 10% of users (canary)
- Monitor error rates + latency
- Check cursor monotonicity
- If healthy â†’ 50% â†’ 100%
- Monitor System Guardian alerts

### Step 5: Public Launch
- Update marketing to link to `/signals-radar`
- Old `/signals` redirects (no broken URLs)
- Announce to investors: "Live Signal Radar"

---

## Monitoring & Alerts (System Guardian)

Guardian checks every 10 minutes:

| Check | Threshold | Alert | Auto-Heal |
|-------|-----------|-------|-----------|
| API health | 2s timeout | ERROR | Fall back to fake |
| Cursor monotonicity | Ever regress | ERROR | Log, investigate |
| Mode invariants | Violated | ERROR | Freeze mode |
| Latency P95 | > 200ms | WARN | Log, monitor |
| Feed staleness | > 6h | WARN | Trigger rescan |
| Merge validation | Delta structure | ERROR | Rollback, log |

**Dashboard:** `/admin/health`

---

## Risk Mitigation

| Risk | Mitigation |
|------|-----------|
| **API down** | Graceful fallback to fake data + user notice |
| **Slow API** | Timeout at 10s, async merge, never blocks UI |
| **Bad cursor** | Cursor validation, never regress, retry with old cursor |
| **Merge delta conflicts** | Strict schema validation, never merge invalid deltas |
| **Mode machine stuck** | Invariant checks, timeout rescue, fallback to global |
| **Network flaky** | Exponential backoff, per-request abort, resume seamlessly |
| **Load spike** | Polling throttle, edge caching, circuit breaker |

---

## Success Metrics

### Technical
- **Latency P95:** < 200ms per endpoint
- **Availability:** > 99.5% (SLA)
- **Error budget:** 0.5% error rate allowed
- **Cursor monotonicity:** 100% (never regress)
- **Mode machine uptime:** 100% (no stuck states)

### User Experience
- **Time to reveal:** < 1.5s
- **Feed freshness:** < 6h staleness
- **Context layer adoption:** > 30% of tracked users click "Why did my odds move?"
- **Return rate:** > 80% return to Radar from context
- **Bounce rate:** < 5% (should be near 0%)

### Business
- **Conversion rate:** % of visitors who enter tracking mode
- **Email capture rate:** % who subscribe to alerts
- **NPS:** Net Promoter Score from surveyed users
- **DAU:** Daily Active Users
- **Engagement time:** Avg minutes spent per session

---

## Next Immediate Actions

### For Backend Team
1. Implement `/api/v1/startups/resolve` (resolve URL)
2. Implement `/api/v1/scans` + GET poll endpoint
3. Implement `/api/v1/startups/{id}/tracking` with cursor support
4. Verify cursor never regresses
5. Test latency < 200ms (P95)

### For Frontend Team
1. Environment: `VITE_PYTHH_DATASOURCE=api` when backend ready
2. Manual test: Submit URL â†’ track mode â†’ click "Why did my odds move?"
3. Verify all error paths (API down, timeout, bad JSON)
4. Performance test: 50+ rapid cursor polls

### For DevOps/Platform
1. Set up health dashboard monitoring
2. Configure error budget alerting
3. Prepare canary deployment
4. Document rollback procedure

### For QA
1. Test fake mode end-to-end (works unchanged)
2. Test mode machine state transitions
3. Test graceful degradation (API down)
4. Test cursor monotonicity (50+ polls)

---

## Documentation Files Created

| File | Purpose |
|------|---------|
| `SIGNALS_CONTEXT_REFACTOR.md` | Complete refactor plan (8-step breakdown) |
| `OPTION_B_COMPLETE.md` | Strategic completion summary |
| `API_WIRING_GUIDE.md` | Frontend â†’ Backend integration guide |
| `READY_FOR_PRODUCTION.md` | Original playbook + deployment |
| `BACKEND_CONTRACT.md` | API contracts + SLA table |
| `core.test.ts` | 6 core unit tests |

---

## Final State Summary

âœ… **Hero Product:** PYTHH Signal Radar (personal, real-time, action-generating)
âœ… **Context Layer:** Signals Context (macro explanation, subordinate)
âœ… **No Competition:** Clear narrative hierarchy
âœ… **Production Ready:** Build passes, types locked, API contracts documented
âœ… **Risk Mitigated:** Graceful fallbacks, error guards, monitoring
âœ… **Zero Rebuild:** Runtime config switches fake â†” api
âœ… **Testable:** 6 core tests + integration patterns provided
âœ… **Maintainable:** Clean separation, reusable backend contracts

---

## Strategic Quote

> "The Radar is the hero. Everything else explains why the hero matters. No competition. No confusion. One mental model: navigate capital flow toward you, understand market context, repeat."

---

*Production Status: ğŸš€ Ready to Wire Backend*

*Build Status: âœ… Verified (10.82s, 2508 modules)*

*Deployment Risk: ğŸŸ¢ Minimal (redirects + new route, no core product changes)*

*Next Phase: Backend implementation + integration testing*
